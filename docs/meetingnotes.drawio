<mxfile host="localhost" modified="2020-05-12T21:52:51.685Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.45.0 Chrome/78.0.3904.130 Electron/7.2.4 Safari/537.36" etag="Mc8mpiGcgeje6CRGa-SU" version="13.0.9">
    <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
        <mxGraphModel dx="1096" dy="666" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="2469" background="none" math="0" shadow="0">
            <root>
                <mxCell id="WIyWlLk6GJQsqaUBKTNV-0"/>
                <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0"/>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-5" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="20" y="150" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-6" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="110" y="150" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-7" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="20" y="242" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-8" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="110" y="242" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-12" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;4&quot; style=&quot;width: 100% ; height: 100% ; border-collapse: collapse&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;&gt;&lt;b&gt;Bucket 2&lt;/b&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;TS20 x&lt;br&gt;TS22&amp;nbsp; y&lt;br&gt;TS36 y&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;overflow=fill;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="570" y="80" width="160" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-13" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;4&quot; style=&quot;width: 100% ; height: 100% ; border-collapse: collapse&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;&gt;&lt;b&gt;Bucket 1&lt;/b&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;TS33 a&lt;br&gt;TS33 b&lt;br&gt;TS34&amp;nbsp; c&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;overflow=fill;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="310" y="80" width="160" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-18" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;4&quot; style=&quot;width: 100% ; height: 100% ; border-collapse: collapse&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;&gt;Consumer 1&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Range1:&lt;br&gt;bucket id: 1&lt;br&gt;TS min 20&lt;br&gt;TS max&amp;nbsp; 40&lt;br&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Range3:&lt;br&gt;bucket id: 2&lt;br&gt;TS min 20&lt;br&gt;TS max&amp;nbsp; 40&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;overflow=fill;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="333.5" y="228" width="160" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-28" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;4&quot; style=&quot;width: 100% ; height: 100% ; border-collapse: collapse&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;&gt;Buckets min priority&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Bucket:1&lt;br&gt;TS: 33&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Bucket: 2&lt;br&gt;TS: 20&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;overflow=fill;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="550" y="228" width="160" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-29" value="&lt;h1&gt;&lt;span style=&quot;font-size: 12px ; font-weight: normal&quot;&gt;Un consumer consuma din MIN priority din toate buckets tale.&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;Consuma din prioriati in ordine (TS22, TS23...) pana cand ajunge la un o nou prioritate care este diferita.&lt;/p&gt;&lt;p&gt;Actualizeaza offsetul in BucketsMinpriority bucket curent. (sau nu e reponsabilitatea lui?)&lt;/p&gt;&lt;p&gt;Se muta pe bucketul cu MinPriority.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="250" y="430" width="530" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="9nznwW9TU_Cb38rcqEm2-9" value="replica" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.011;entryY=0.126;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-31" target="YDd-HgIoZFYJOX-3HQeq-39" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-31" value="" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#DFDFDF;html=1;whiteSpace=wrap;fillColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="310" y="740" width="200" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-32" value="table_topic_partition (leader)" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.topButton;strokeColor=inherit;fillColor=#F7F7F7;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-31" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-33" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-31" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-34" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-31" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="60" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-35" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.bottomButton;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;resizeHeight=0;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-31" vertex="1">
                    <mxGeometry y="1" width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="-30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-36" value="" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#DFDFDF;html=1;whiteSpace=wrap;fillColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="590" y="740" width="200" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-37" value="table_topic_partition" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.topButton;strokeColor=inherit;fillColor=#F7F7F7;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-36" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-38" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-36" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-39" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-36" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="60" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-40" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.bottomButton;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;resizeHeight=0;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-36" vertex="1">
                    <mxGeometry y="1" width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="-30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-41" value="" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#DFDFDF;html=1;whiteSpace=wrap;fillColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="47.5" y="740" width="200" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-42" value="table_topic_partition" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.topButton;strokeColor=inherit;fillColor=#F7F7F7;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-41" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-43" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-41" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-44" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;perimeter=none;whiteSpace=wrap;resizeWidth=1;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-41" vertex="1">
                    <mxGeometry width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="60" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-45" value="ts_msgid =&amp;gt; metadata[bytes]" style="strokeColor=inherit;fillColor=inherit;gradientColor=inherit;fontColor=inherit;html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.bottomButton;rSize=5;perimeter=none;whiteSpace=wrap;resizeWidth=1;resizeHeight=0;align=left;spacing=10;" parent="YDd-HgIoZFYJOX-3HQeq-41" vertex="1">
                    <mxGeometry y="1" width="200" height="30" relative="1" as="geometry">
                        <mxPoint y="-30" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-47" value="quorum write&amp;nbsp;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.452;entryY=-0.054;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-46" target="YDd-HgIoZFYJOX-3HQeq-32" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-46" value="producer" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="350" y="630" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.66;entryY=1.023;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-49" target="YDd-HgIoZFYJOX-3HQeq-45" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-49" value="consumer" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="130" y="980" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.383;entryY=1.075;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-50" target="YDd-HgIoZFYJOX-3HQeq-35" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-50" value="consumer" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="340" y="980" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.452;entryY=1.126;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-51" target="YDd-HgIoZFYJOX-3HQeq-40" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-51" value="consumer" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="580" y="990" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-60" value="replica" style="endArrow=classic;html=1;exitX=-0.013;exitY=0.382;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.995;entryY=0.382;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="YDd-HgIoZFYJOX-3HQeq-33" target="YDd-HgIoZFYJOX-3HQeq-43" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="260" y="730" as="sourcePoint"/>
                        <mxPoint x="310" y="680" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="YDd-HgIoZFYJOX-3HQeq-65" value="ACK instead of Delete, but in the prototype the broker will actually do a sync delete (in the future well do mark for delete)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="20" y="547" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="9nznwW9TU_Cb38rcqEm2-1" value="&lt;h1&gt;topic leader&lt;/h1&gt;&lt;p&gt;parition allocations on nodes&lt;/p&gt;&lt;p&gt;partition replication factor&lt;/p&gt;&lt;p&gt;provisioning&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="480" y="570" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="9nznwW9TU_Cb38rcqEm2-2" value="Partition instead of bucket&lt;br&gt;&lt;br&gt;&lt;br&gt;Prototype - only 3 nodes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="15" y="610" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="9nznwW9TU_Cb38rcqEm2-4" value="&lt;h1&gt;partition leader&lt;/h1&gt;&lt;p&gt;populate min_priority&lt;/p&gt;&lt;p&gt;master of parition (writes)&amp;nbsp;&lt;/p&gt;&lt;p&gt;cleanups&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="680" y="570" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="9nznwW9TU_Cb38rcqEm2-10" value="To implement Cancel message (only for Timeline topics) we need an extra topic to serve as a LOOKUP table, to help us find the msg&lt;br&gt;NOT IN PROTOTYPE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="20" y="430" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-0" target="7WVw22hoJe6Edza4k_C1-2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-0" value="consumer GET" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="130" y="1100" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-2" target="7WVw22hoJe6Edza4k_C1-4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-2" value="broker public GRPC" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="120" y="1170" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-27" value="assign Partition if not found" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-4" target="7WVw22hoJe6Edza4k_C1-7" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="240" y="1300" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-4" target="7WVw22hoJe6Edza4k_C1-20" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-4" value="storage" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="120" y="1250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-8" value="fetch Topic + Partition" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-7" target="7WVw22hoJe6Edza4k_C1-4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-36" value="getNodes for Partition" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-7" target="7WVw22hoJe6Edza4k_C1-20" edge="1">
                    <mxGeometry x="-0.1556" y="-40" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="430" y="1365"/>
                        </Array>
                        <mxPoint x="-40" y="40" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-7" value="cluster&lt;br&gt;metadata" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="384" y="1190" width="60" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-18" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-10" target="7WVw22hoJe6Edza4k_C1-13" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-19" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-10" target="7WVw22hoJe6Edza4k_C1-17" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-10" value="is local&lt;br&gt;partition" style="rhombus;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="210" y="1430" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-11" target="7WVw22hoJe6Edza4k_C1-20" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-11" value="otherBroker 1&lt;br&gt;private GRPC" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="620" y="1390" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-12" target="7WVw22hoJe6Edza4k_C1-20" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-12" value="otherBroker 1&lt;br&gt;private GRPC" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="620" y="1310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-13" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="240" y="1620" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-13" value="read local&lt;br&gt;read otherBroker" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="310" y="1510" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-14" target="7WVw22hoJe6Edza4k_C1-20" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="310" y="1360" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="460" y="1510"/>
                            <mxPoint x="460" y="1380"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-14" value="local&lt;br&gt;storage" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="600" y="1470" width="60" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-17" target="7WVw22hoJe6Edza4k_C1-26" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-17" value="read 2 brokers" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="70" y="1510" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-34" value="algorithm" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7WVw22hoJe6Edza4k_C1-20" target="7WVw22hoJe6Edza4k_C1-10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-20" value="getOldestMsgs&lt;br&gt;WithQuorum" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="180" y="1350" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7WVw22hoJe6Edza4k_C1-26" value="return results" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
                    <mxGeometry x="190" y="1620" width="100" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>